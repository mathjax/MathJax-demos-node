(()=>{"use strict";const t=MathJax._.adaptors.HTMLAdaptor.HTMLAdaptor,e=MathJax._.util.Options,n=(e.isObject,e.APPEND,e.REMOVE,e.OPTIONS,e.Expandable,e.expandable,e.makeArray,e.keys,e.copy,e.insert,e.defaultOptions),r=e.userOptions,o=(e.selectOptions,e.selectOptionsFromKeys,e.separateOptions,e.lookup,MathJax._.util.AsyncLoad.asyncLoad);var s=function(t,e,n,r){return new(n||(n=Promise))((function(o,s){function a(t){try{c(r.next(t))}catch(t){s(t)}}function i(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,i)}c((r=r.apply(t,e||[])).next())}))};const a={badCSS:!0,badSizes:!0};class i extends(function(t,e={}){var i;return e=r(n({},a),e),(i=class extends t{constructor(...t){super(t[0]),this.canMeasureNodes=!1;const e=this.constructor;this.options=r(n({},e.OPTIONS),t[1])}fontSize(t){return e.badCSS?this.options.fontSize:super.fontSize(t)}fontFamily(t){return e.badCSS?this.options.fontFamily:super.fontFamily(t)}nodeSize(t,n=1,r=null){if(!e.badSizes)return super.nodeSize(t,n,r);const o=this.textContent(t),s=Array.from(o.replace(i.cjkPattern,"")).length;return[(Array.from(o).length-s)*this.options.cjkCharWidth+s*this.options.unknownCharWidth,this.options.unknownCharHeight]}nodeBBox(t){return e.badSizes?{left:0,right:0,top:0,bottom:0}:super.nodeBBox(t)}createWorker(t,e){return s(this,void 0,void 0,(function*(){const{Worker:n}=yield o("node:worker_threads");const{path:r,maps:s}=e,a=`${r}/${e.worker}`,i=new class{constructor(t,e={}){this.worker=new n(t,e)}addEventListener(t,e){this.worker.on(t,e)}postMessage(t){this.worker.postMessage({data:t})}terminate(){this.worker.terminate()}}(a,{type:"module",workerData:{maps:s}});return i.addEventListener("message",t),i}))}}).OPTIONS=Object.assign(Object.assign({},e.badCSS?{fontSize:16,fontFamily:"Times"}:{}),e.badSizes?{cjkCharWidth:1,unknownCharWidth:.6,unknownCharHeight:.8}:{}),i.cjkPattern=new RegExp(["[","\u1100-\u115f","\u2329\u232a","\u2e80-\u303e","\u3040-\u3247","\u3250-\u4dbf","\u4e00-\ua4c6","\ua960-\ua97c","\uac00-\ud7a3","\uf900-\ufaff","\ufe10-\ufe19","\ufe30-\ufe6b","\uff01-\uff60\uffe0-\uffe6","\u{1b000}-\u{1b001}","\u{1f200}-\u{1f251}","\u{20000}-\u{3fffd}","]"].join(""),"gu"),i}(t)){parse(t,e="text/html"){return t.match(/^(?:\s|\n)*</)||(t="<html>"+t+"</html>"),this.parser.parseFromString(t,e)}serializeXML(t){return this.outerHTML(t)}}MathJax.loader&&MathJax.loader.checkVersion("[linkedom]/linkedomAdaptor","4.0.0-rc.4","DOMadaptor"),MathJax.startup&&(MathJax.startup.registerConstructor("linkedomAdaptor",(()=>function(t,e=null){const n=t("<html></html>");return n.HTMLCollection=class{},n.Text.prototype.splitText=function(t){const e=this.data;if(t>e.length)throw Error("Index Size Error");const r=n.document.createTextNode(e.substring(t));return this.parentNode.insertBefore(r,this.nextSibling),this.data=e.substring(0,t),r},new i(n,e)}(MathJax.config.LINKEDOM))),MathJax.startup.useAdaptor("linkedomAdaptor",!0))})();