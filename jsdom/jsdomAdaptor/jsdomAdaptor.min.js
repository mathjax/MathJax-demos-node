(()=>{"use strict";const t=MathJax._.adaptors.HTMLAdaptor.HTMLAdaptor,e=MathJax._.util.Options,n=(e.isObject,e.APPEND,e.REMOVE,e.OPTIONS,e.Expandable,e.expandable,e.makeArray,e.keys,e.copy,e.insert,e.defaultOptions),o=e.userOptions,r=(e.selectOptions,e.selectOptionsFromKeys,e.separateOptions,e.lookup,MathJax._.util.AsyncLoad.asyncLoad);var a=function(t,e,n,o){return new(n||(n=Promise))((function(r,a){function s(t){try{d(o.next(t))}catch(t){a(t)}}function i(t){try{d(o.throw(t))}catch(t){a(t)}}function d(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,i)}d((o=o.apply(t,e||[])).next())}))};const s={badCSS:!0,badSizes:!0};class i extends(function(t,e={}){var i;return e=o(n({},s),e),(i=class extends t{constructor(...t){super(t[0]),this.canMeasureNodes=!1;const e=this.constructor;this.options=o(n({},e.OPTIONS),t[1])}fontSize(t){return e.badCSS?this.options.fontSize:super.fontSize(t)}fontFamily(t){return e.badCSS?this.options.fontFamily:super.fontFamily(t)}nodeSize(t,n=1,o=null){if(!e.badSizes)return super.nodeSize(t,n,o);const r=this.textContent(t),a=Array.from(r.replace(i.cjkPattern,"")).length;return[(Array.from(r).length-a)*this.options.cjkCharWidth+a*this.options.unknownCharWidth,this.options.unknownCharHeight]}nodeBBox(t){return e.badSizes?{left:0,right:0,top:0,bottom:0}:super.nodeBBox(t)}createWorker(t,e){return a(this,void 0,void 0,(function*(){const{Worker:n}=yield r("node:worker_threads");const{path:o,maps:a}=e,s=`${o}/${e.worker}`,i=new class{constructor(t,e={}){this.worker=new n(t,e)}addEventListener(t,e){this.worker.on(t,e)}postMessage(t){this.worker.postMessage({data:t})}terminate(){this.worker.terminate()}}(s,{type:"module",workerData:{maps:a}});return i.addEventListener("message",t),i}))}}).OPTIONS=Object.assign(Object.assign({},e.badCSS?{fontSize:16,fontFamily:"Times"}:{}),e.badSizes?{cjkCharWidth:1,unknownCharWidth:.6,unknownCharHeight:.8}:{}),i.cjkPattern=new RegExp(["[","\u1100-\u115f","\u2329\u232a","\u2e80-\u303e","\u3040-\u3247","\u3250-\u4dbf","\u4e00-\ua4c6","\ua960-\ua97c","\uac00-\ud7a3","\uf900-\ufaff","\ufe10-\ufe19","\ufe30-\ufe6b","\uff01-\uff60\uffe0-\uffe6","\u{1b000}-\u{1b001}","\u{1f200}-\u{1f251}","\u{20000}-\u{3fffd}","]"].join(""),"gu"),i}(t)){}MathJax.loader&&MathJax.loader.checkVersion("[jsdom]/jsdomAdaptor","4.0.0-rc.4","DOMadaptor"),MathJax.startup&&(MathJax.startup.registerConstructor("jsdomAdaptor",(()=>function(t,e=null){return new i((new t).window,e)}(MathJax.config.JSDOM))),MathJax.startup.useAdaptor("jsdomAdaptor",!0))})();